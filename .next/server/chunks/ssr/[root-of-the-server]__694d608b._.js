module.exports=[9985,(a,b,c)=>{"use strict";b.exports=a.r(68481).vendored["react-ssr"].React},39154,(a,b,c)=>{"use strict";b.exports=a.r(68481).vendored.contexts.AppRouterContext},15581,(a,b,c)=>{"use strict";b.exports=a.r(68481).vendored.contexts.HooksClientContext},8307,(a,b,c)=>{"use strict";b.exports=a.r(68481).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},68481,(a,b,c)=>{"use strict";b.exports=a.r(18622)},46762,(a,b,c)=>{"use strict";b.exports=a.r(68481).vendored["react-ssr"].ReactJsxRuntime},96293,a=>{"use strict";function b(){return Array(9).fill(null)}function c(a,b,c){if(b<0||b>8||null!==a[b]||"X"!==c&&"O"!==c)return null;let d=[...a];return d[b]=c,d}function d(a){for(let b of[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]){let[c,d,e]=b;if(a[c]&&a[c]===a[d]&&a[c]===a[e])return a[c]}return f(a)?"draw":null}function e(a){for(let b of[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]){let[c,d,e]=b;if(a[c]&&a[c]===a[d]&&a[c]===a[e])return b}return[]}function f(a){return a.every(a=>null!==a)}function g(a){return a.map((a,b)=>null===a?b:-1).filter(a=>-1!==a)}function h(a){return"X"===a?"O":"X"}function i(a){return 4===a?3:[0,2,6,8].includes(a)?2:+!![1,3,5,7].includes(a)}function j(a,b,e,k,l=0){let m=d(a);if(m===b)return{score:10-l,move:null};if(m===h(b))return{score:l-10,move:null};if("draw"===m||f(a)||l>=e)return{score:0,move:null};let n=[...g(a)].sort((a,b)=>i(b)-i(a));if(k){let d=-1/0,f=n[0]||null,g=-1;for(let h of n){let k=c(a,h,b);if(!k)continue;let m=j(k,b,e,!1,l+1),n=i(h);(m.score>d||m.score===d&&n>g)&&(d=m.score,f=h,g=n)}return{score:d,move:f}}{let d=1/0;for(let f of n){let g=c(a,f,h(b));if(!g)continue;let i=j(g,b,e,!0,l+1);i.score<d&&(d=i.score)}return{score:d,move:null}}}function k(a,b,c="medium"){let d=g(a);if(0===d.length)return null;if("easy"===c){let a=Math.floor(Math.random()*d.length);return d[a]}return"medium"===c?j(a,b,2,!0).move:"hard"===c?j(a,b,9,!0).move:j(a,b,2,!0).move}a.s(["checkWinner",()=>d,"createEmptyBoard",()=>b,"getAvailableMoves",()=>g,"getBestMove",()=>k,"getWinningCells",()=>e,"isBoardFull",()=>f,"makeMove",()=>c])},12864,a=>{"use strict";var b=a.i(46762),c=a.i(9985),d=a.i(78405),e=a.i(11105),f=a.i(43257);a.i(23498);var g=a.i(99104),h=a.i(96293),i=a.i(31861),j=a.i(76446);let k=(0,j.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),l=(0,j.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),m=(0,j.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),n=(0,j.default)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),o=(0,j.default)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var p=a.i(61953);function q(){let j=(0,d.useParams)(),q=(0,d.useRouter)(),r=j.roomId,[s,t]=(0,c.useState)((0,h.createEmptyBoard)()),[u,v]=(0,c.useState)("X"),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)("connecting"),[C,D]=(0,c.useState)("waiting"),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),K=(0,c.useRef)(null),L=(0,c.useRef)(`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`);(0,c.useEffect)(()=>{},[]),(0,c.useEffect)(()=>((async()=>{let{RealtimeGame:b}=await a.A(56679),c=new b(r,L.current,{onMove:(a,b,d,e)=>{t(a),v(b),x(d),z(e),J(b===c.getPlayerRole())},onOpponentJoin:()=>{D("connected")},onOpponentLeave:()=>{D("disconnected")},onGameReset:()=>{t((0,h.createEmptyBoard)()),v("X"),x(null),z([]),J("X"===c.getPlayerRole())},onConnectionChange:a=>{B(a)},onOpponentStatusChange:a=>{D(a)}});K.current=c;let d=await c.joinRoom();d.success&&d.playerRole&&(F(d.playerRole),J("X"===d.playerRole)),await c.connect()})().catch(console.error),()=>{K.current&&K.current.disconnect()}),[r]);let M=(0,c.useCallback)(async a=>{K.current&&!w&&I&&E&&u===E&&(await K.current.makeMove(a,s,u)||console.error("Failed to make move"))},[s,u,w,I,E]),N=(0,c.useCallback)(async()=>{K.current&&await K.current.resetGame()},[]),O=(0,c.useCallback)(()=>{let a=`${window.location.origin}/online/${r}`;navigator.clipboard.writeText(a).then(()=>{H(!0),setTimeout(()=>H(!1),2e3)})},[r]),P=null!==w||!I||"connected"!==C;return(0,b.jsxs)("main",{className:"relative flex min-h-screen flex-col items-center justify-center p-4 md:p-6 lg:p-8 overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-background to-destructive/5 dark:from-primary/10 dark:via-background dark:to-destructive/10"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(120,119,198,0.1),transparent_50%)]"}),(0,b.jsx)(f.AnimatePresence,{mode:"wait",children:(0,b.jsx)(e.motion.div,{className:"relative w-full max-w-2xl mx-auto space-y-6 md:space-y-8 z-10",initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.5,ease:"easeOut"},children:(0,b.jsxs)(e.motion.div,{className:"backdrop-blur-xl bg-card/80 dark:bg-card/60 border border-border/50 rounded-2xl md:rounded-3xl shadow-2xl p-4 md:p-6 lg:p-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.1},children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)(i.Button,{variant:"ghost",size:"sm",onClick:()=>q.push("/"),className:"mb-2",children:[(0,b.jsx)(m,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["connected"===A?(0,b.jsx)(n,{className:"h-4 w-4 text-green-500"}):(0,b.jsx)(o,{className:"h-4 w-4 text-red-500"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"connected"===A?"Connected":"Disconnected"})]})]}),(0,b.jsx)("div",{className:"mb-6 p-4 bg-muted/50 rounded-lg border border-border/50",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium mb-1",children:"Room ID"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground font-mono break-all",children:r})]}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:O,className:"shrink-0",children:G?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l,{className:"mr-2 h-4 w-4"}),"Copied!"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k,{className:"mr-2 h-4 w-4"}),"Copy Link"]})})]})}),(0,b.jsxs)("div",{className:"mb-4 flex items-center gap-2 text-sm",children:["waiting"===C&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"Waiting for opponent..."})]}),"connected"===C&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Users,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{className:"text-green-500",children:"Opponent connected"})]}),"disconnected"===C&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Users,{className:"h-4 w-4 text-red-500"}),(0,b.jsx)("span",{className:"text-red-500",children:"Opponent left"})]})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("p",{className:"text-center text-lg font-semibold",children:"connecting"===A||"error"===A?"error"===A?"Connection error. Please refresh.":"Connecting...":"waiting"===C?"Waiting for opponent...":"disconnected"===C?"Opponent left":w?"draw"===w?"It's a draw!":w===E?"You win!":"Opponent wins!":I?`Your turn (${E})`:`Opponent's turn (${u})`})}),(0,b.jsx)(g.Board,{board:s,onSquareClick:M,winningCells:y,disabled:P}),(0,b.jsx)("div",{className:"mt-8 flex justify-center",children:(0,b.jsx)(i.Button,{onClick:N,size:"lg",disabled:"connected"!==C,className:"min-w-[140px]","aria-label":"Start a new game",children:"New Game"})})]})},r)})]})}a.s(["default",()=>q],12864)},56679,a=>{a.v(b=>Promise.all(["server/chunks/ssr/Tictactoe_src_lib_game_ts_58cdedc9._.js","server/chunks/ssr/Tictactoe_3cb32860._.js"].map(b=>a.l(b))).then(()=>b(93206)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__694d608b._.js.map