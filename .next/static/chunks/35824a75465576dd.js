(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15859,e=>{"use strict";function t(){return Array(9).fill(null)}function n(e,t,n){if(t<0||t>8||null!==e[t]||"X"!==n&&"O"!==n)return null;let a=[...e];return a[t]=n,a}function a(e){for(let t of[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]){let[n,a,r]=t;if(e[n]&&e[n]===e[a]&&e[n]===e[r])return e[n]}return s(e)?"draw":null}function r(e){for(let t of[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]){let[n,a,r]=t;if(e[n]&&e[n]===e[a]&&e[n]===e[r])return t}return[]}function s(e){return e.every(e=>null!==e)}function l(e){return e.map((e,t)=>null===e?t:-1).filter(e=>-1!==e)}function o(e){return"X"===e?"O":"X"}function i(e){return 4===e?3:[0,2,6,8].includes(e)?2:+!![1,3,5,7].includes(e)}function c(e,t,r,d,u=0){let m=a(e);if(m===t)return{score:10-u,move:null};if(m===o(t))return{score:u-10,move:null};if("draw"===m||s(e)||u>=r)return{score:0,move:null};let f=[...l(e)].sort((e,t)=>i(t)-i(e));if(d){let a=-1/0,s=f[0]||null,l=-1;for(let o of f){let d=n(e,o,t);if(!d)continue;let m=c(d,t,r,!1,u+1),f=i(o);(m.score>a||m.score===a&&f>l)&&(a=m.score,s=o,l=f)}return{score:a,move:s}}{let a=1/0;for(let s of f){let l=n(e,s,o(t));if(!l)continue;let i=c(l,t,r,!0,u+1);i.score<a&&(a=i.score)}return{score:a,move:null}}}function d(e,t,n="medium"){let a=l(e);if(0===a.length)return null;if("easy"===n){let e=Math.floor(Math.random()*a.length);return a[e]}return"medium"===n?c(e,t,2,!0).move:"hard"===n?c(e,t,9,!0).move:c(e,t,2,!0).move}e.s(["checkWinner",()=>a,"createEmptyBoard",()=>t,"getAvailableMoves",()=>l,"getBestMove",()=>d,"getWinningCells",()=>r,"isBoardFull",()=>s,"makeMove",()=>n])},89078,e=>{"use strict";var t=e.i(77281),n=e.i(96709),a=e.i(10460),r=e.i(94419),s=e.i(69754);e.i(13827);var l=e.i(8442),o=e.i(15859),i=e.i(92658),c=e.i(14845);let d=(0,c.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),u=(0,c.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),m=(0,c.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),f=(0,c.default)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),p=(0,c.default)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var h=e.i(47563);function x(){let c=(0,a.useParams)(),x=(0,a.useRouter)(),g=c.roomId,[y,j]=(0,n.useState)((0,o.createEmptyBoard)()),[b,k]=(0,n.useState)("X"),[w,v]=(0,n.useState)(null),[N,M]=(0,n.useState)([]),[C,S]=(0,n.useState)("connecting"),[O,R]=(0,n.useState)("waiting"),[B,z]=(0,n.useState)(null),[I,P]=(0,n.useState)(!1),[F,X]=(0,n.useState)(!1),A=(0,n.useRef)(null),T=(0,n.useRef)(localStorage.getItem("playerId")||`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`);(0,n.useEffect)(()=>{{let e=localStorage.getItem("playerId");e?T.current=e:localStorage.setItem("playerId",T.current)}},[]),(0,n.useEffect)(()=>((async()=>{let{RealtimeGame:t}=await e.A(35245),n=new t(g,T.current,{onMove:(e,t,a,r)=>{j(e),k(t),v(a),M(r),X(t===n.getPlayerRole())},onOpponentJoin:()=>{R("connected")},onOpponentLeave:()=>{R("disconnected")},onGameReset:()=>{j((0,o.createEmptyBoard)()),k("X"),v(null),M([]),X("X"===n.getPlayerRole())},onConnectionChange:e=>{S(e)},onOpponentStatusChange:e=>{R(e)}});A.current=n;let a=await n.joinRoom();a.success&&a.playerRole&&(z(a.playerRole),X("X"===a.playerRole)),await n.connect()})().catch(console.error),()=>{A.current&&A.current.disconnect()}),[g]);let $=(0,n.useCallback)(async e=>{A.current&&!w&&F&&B&&b===B&&(await A.current.makeMove(e,y,b)||console.error("Failed to make move"))},[y,b,w,F,B]),_=(0,n.useCallback)(async()=>{A.current&&await A.current.resetGame()},[]),E=(0,n.useCallback)(()=>{let e=`${window.location.origin}/online/${g}`;navigator.clipboard.writeText(e).then(()=>{P(!0),setTimeout(()=>P(!1),2e3)})},[g]),U=null!==w||!F||"connected"!==O;return(0,t.jsxs)("main",{className:"relative flex min-h-screen flex-col items-center justify-center p-4 md:p-6 lg:p-8 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-background to-destructive/5 dark:from-primary/10 dark:via-background dark:to-destructive/10"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(120,119,198,0.1),transparent_50%)]"}),(0,t.jsx)(s.AnimatePresence,{mode:"wait",children:(0,t.jsx)(r.motion.div,{className:"relative w-full max-w-2xl mx-auto space-y-6 md:space-y-8 z-10",initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.5,ease:"easeOut"},children:(0,t.jsxs)(r.motion.div,{className:"backdrop-blur-xl bg-card/80 dark:bg-card/60 border border-border/50 rounded-2xl md:rounded-3xl shadow-2xl p-4 md:p-6 lg:p-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.1},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)(i.Button,{variant:"ghost",size:"sm",onClick:()=>x.push("/"),className:"mb-2",children:[(0,t.jsx)(m,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["connected"===C?(0,t.jsx)(f,{className:"h-4 w-4 text-green-500"}):(0,t.jsx)(p,{className:"h-4 w-4 text-red-500"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"connected"===C?"Connected":"Disconnected"})]})]}),(0,t.jsx)("div",{className:"mb-6 p-4 bg-muted/50 rounded-lg border border-border/50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:"Room ID"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground font-mono break-all",children:g})]}),(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:E,className:"shrink-0",children:I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{className:"mr-2 h-4 w-4"}),"Copied!"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{className:"mr-2 h-4 w-4"}),"Copy Link"]})})]})}),(0,t.jsxs)("div",{className:"mb-4 flex items-center gap-2 text-sm",children:["waiting"===O&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Waiting for opponent..."})]}),"connected"===O&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Users,{className:"h-4 w-4 text-green-500"}),(0,t.jsx)("span",{className:"text-green-500",children:"Opponent connected"})]}),"disconnected"===O&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Users,{className:"h-4 w-4 text-red-500"}),(0,t.jsx)("span",{className:"text-red-500",children:"Opponent left"})]})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("p",{className:"text-center text-lg font-semibold",children:"connecting"===C||"error"===C?"error"===C?"Connection error. Please refresh.":"Connecting...":"waiting"===O?"Waiting for opponent...":"disconnected"===O?"Opponent left":w?"draw"===w?"It's a draw!":w===B?"You win!":"Opponent wins!":F?`Your turn (${B})`:`Opponent's turn (${b})`})}),(0,t.jsx)(l.Board,{board:y,onSquareClick:$,winningCells:N,disabled:U}),(0,t.jsx)("div",{className:"mt-8 flex justify-center",children:(0,t.jsx)(i.Button,{onClick:_,size:"lg",disabled:"connected"!==O,className:"min-w-[140px]","aria-label":"Start a new game",children:"New Game"})})]})},g)})]})}e.s(["default",()=>x],89078)},35245,e=>{e.v(t=>Promise.all(["static/chunks/5cdabab84731d696.js","static/chunks/de0c309b694acdf7.js"].map(t=>e.l(t))).then(()=>t(57293)))}]);